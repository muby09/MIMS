import{M as U,f as E}from"./MainLayout-DLqZQz8T.js";import{l as n,c as i,a as l,u as w,w as k,F as b,v as c,o as u,Z as L,b as t,r as y,J as N,t as d}from"./app-BUbXf8zH.js";import{_ as B}from"./Modal-DQyIuiwa.js";import{b as q,_ as A,a as Q}from"./TextInput-yIcStZbp.js";import{_ as T}from"./Select-CEZDa9d0.js";import"./NavLink-BH76FFhP.js";import"./ApplicationLogo-CgfMIpVf.js";const j={action:"",class:"px-4 py-2"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Z={class:"flex flex-col"},z={class:"flex flex-col"},G={class:"overflow-auto rounded-lg shadow mt-3"},H={class:"w-full"},K={class:"bg-gray-50 border-b-2 border-gray-200"},O={width:"10%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},P={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},W={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},X={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},Y={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ee={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},te={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},se={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered flex"},oe=["onClick"],le=["onClick"],fe={__name:"RequestList",setup(ae){const{transformValidationErrors:V}=E(),f=n(!1),p=()=>{$(),f.value=!1},a=n({date:"",receiver:"",note:"",team:"",items:[{item_pid:"",quantity:""}],errors:{}});function I(){a.errors={},c.dispatch("postMethod",{url:"/request-item",param:a.value}).then(e=>{(e==null?void 0:e.status)==422?a.value.errors=V(e.data):(e==null?void 0:e.status)==201&&(p(),h())}).catch(e=>{console.log(e)})}const $=()=>{a.value={state:"",region:"",errors:{}}},_=e=>{a.value={date:e.date,receiver:e.receiver,team:e.team_pid,items:e.items,note:e.note,pid:e.pid,errors:{}},f.value=!0},x=n({});function h(e="load-request-list"){c.dispatch("getMethod",{url:e}).then(s=>{(s==null?void 0:s.status)==200&&(x.value=s.data)}).catch(s=>{console.log(s)})}h();const C=n({});function M(){c.dispatch("loadDropdown","teams/").then(({data:e})=>{C.value=e}).catch(e=>{console.log(e)})}M();const R=n({});function D(){c.dispatch("loadDropdown","users/").then(({data:e})=>{R.value=e}).catch(e=>{console.log(e)})}D();const g=n({});function F(){c.dispatch("loadDropdown","item-quantity").then(({data:e})=>{g.value=e}).catch(e=>{console.log(e)})}return F(),(e,s)=>(u(),i(b,null,[l(w(L),{title:"Item Request List"}),l(U,null,{default:k(()=>[l(B,{show:f.value,onClose:p,title:"Request Item",onSubmit:I},{default:k(()=>[t("form",j,[s[0]||(s[0]=t("hr",{class:"mt-2"},null,-1)),(u(!0),i(b,null,y(a.value.items,(o,m)=>(u(),i("div",{class:"",key:m},[t("div",J,[t("div",Z,[l(T,{modelValue:o.item_pid,"onUpdate:modelValue":r=>o.item_pid=r,label:"Items",placeholder:"Select Item",options:g.value},null,8,["modelValue","onUpdate:modelValue","options"]),l(q,{class:"mt-2",message:a.value.errors.team},null,8,["message"])]),t("div",z,[l(A,{for:"quantity",value:"Quantity"}),l(Q,{id:"date",type:"number",step:"0.5",class:"mt-1 block w-full",modelValue:o.quantity,"onUpdate:modelValue":r=>o.quantity=r,placeholder:"Enter Quantity",required:""},null,8,["modelValue","onUpdate:modelValue"]),l(q,{class:"mt-2",message:a.value.errors.quantity},null,8,["message"])])])]))),128))])]),_:1},8,["show"]),s[7]||(s[7]=t("div",null,null,-1)),t("div",G,[t("table",H,[t("thead",K,[t("tr",null,[s[1]||(s[1]=t("th",{width:"5%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"S/N",-1)),s[2]||(s[2]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Date",-1)),s[3]||(s[3]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Items",-1)),s[4]||(s[4]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Team",-1)),s[5]||(s[5]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Status",-1)),s[6]||(s[6]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Receiver",-1)),t("th",O,[l(w(N),{icon:"fa-solid fa fa-cog"})])])]),t("tbody",null,[(u(!0),i(b,null,y(x.value,(o,m)=>{var r,v;return u(),i("tr",{class:"bg-white",key:m},[t("td",P,d(m+1),1),t("td",W,d(o.date_requested),1),t("td",X,d(o.items_count),1),t("td",Y,d((r=o==null?void 0:o.team)==null?void 0:r.team),1),t("td",ee,d(o.request_status),1),t("td",te,d((v=o==null?void 0:o.collector)==null?void 0:v.username),1),t("td",se,[t("button",{class:"p-1 oy-1 text-sm bg-red-500 text-white me-2 inline-block",onClick:S=>_(o)},"Reject",8,oe),t("button",{class:"p-1 oy-1 text-sm bg-optimal text-white me-2 inline-block",onClick:S=>_(o)},"Approve",8,le)])])}),128))])])])]),_:1})],64))}};export{fe as default};
