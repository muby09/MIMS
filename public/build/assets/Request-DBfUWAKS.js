import{l as r,c as m,a,u as p,w as U,F as v,v as n,o as f,Z as B,b as e,z as L,A as Q,r as C,I as g,t as i}from"./app-BrrR7Ozw.js";import{M as j,f as z}from"./MainLayout-DSJFYPCE.js";import{_ as O}from"./Modal-BsoZiXVd.js";import{_,b as u,a as $}from"./TextInput-D-PxJzzM.js";import{_ as x}from"./BaseSelect-ClYQ34LG.js";import"./NavLink-D2RRvuaw.js";import"./ApplicationLogo-CHeMhNff.js";const P={action:"",class:"px-4 py-2"},Z={class:"grid grid-cols-1 md:grid-cols-3 gap-2"},G={class:"flex flex-col"},H={class:"flex flex-col"},J={class:"flex flex-col"},K={class:"flex justify-end mt-1"},W=["onClick"],X={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Y={class:"flex flex-col"},ee={class:"flex flex-col"},te={class:"overflow-auto rounded-lg shadow"},se={class:"w-full"},le={class:"bg-gray-50 border-b-2 border-gray-200"},oe={width:"10%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ae={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},de={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},re={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ne={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ie={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ue={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ce={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},me=["onClick"],ke={__name:"Request",setup(fe){const{transformValidationErrors:D}=z(),b=r(!1),h=()=>{N(),b.value=!1},l=r({date:"",receiver:"",note:"",team:"",items:[{item_pid:"",quantity:""}],errors:{}});function M(){l.errors={},n.dispatch("postMethod",{url:"/request-item",param:l.value}).then(t=>{(t==null?void 0:t.status)==422?l.value.errors=D(t.data):(t==null?void 0:t.status)==201&&(h(),k())}).catch(t=>{console.log(t)})}const N=()=>{l.value={state:"",region:"",errors:{}}},R=t=>{l.value={date:t.date,receiver:t.receiver,team:t.team_pid,items:t.items,note:t.note,pid:t.pid,errors:{}},b.value=!0},w=r({});function k(t="load-request"){n.dispatch("getMethod",{url:t}).then(s=>{(s==null?void 0:s.status)==200&&(w.value=s.data)}).catch(s=>{console.log(s)})}k();const y=r({});function E(){n.dispatch("loadDropdown","teams/").then(({data:t})=>{y.value=t}).catch(t=>{console.log(t)})}E();const q=r({});function F(){n.dispatch("loadDropdown","users/").then(({data:t})=>{q.value=t}).catch(t=>{console.log(t)})}F();const V=r({});function S(){n.dispatch("loadDropdown","item-quantity").then(({data:t})=>{V.value=t}).catch(t=>{console.log(t)})}S();const T=()=>{l.value.items.push({item_pid:"",quantity:""})},A=t=>{if(l.value.items.length===1){n.commit("notify",{message:"One Item is required to proceed",type:"warning"});return}l.value.items.splice(t,1)};return(t,s)=>(f(),m(v,null,[a(p(B),{title:"Item Request"}),a(j,null,{default:U(()=>[a(O,{show:b.value,onClose:h,title:"Request Item",onSubmit:M},{default:U(()=>[e("form",P,[e("div",null,[a(_,{for:"email",value:"Request Note"}),L(e("textarea",{"onUpdate:modelValue":s[0]||(s[0]=o=>l.value.note=o),placeholder:"Enter Note",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},null,512),[[Q,l.value.note]]),a(u,{class:"mt-2",message:l.value.errors.note},null,8,["message"])]),e("div",Z,[e("div",G,[a(_,{for:"gsm",value:"Date"}),a($,{id:"date",type:"date",class:"mt-1 block w-full",modelValue:l.value.date,"onUpdate:modelValue":s[1]||(s[1]=o=>l.value.date=o),placeholder:"Phone Number",required:""},null,8,["modelValue"]),a(u,{class:"mt-2",message:l.value.errors.date},null,8,["message"])]),e("div",H,[a(x,{modelValue:l.value.team,"onUpdate:modelValue":s[2]||(s[2]=o=>l.value.team=o),label:"Team",selected:l.value.team,options:y.value},null,8,["modelValue","selected","options"]),a(u,{class:"mt-2",message:l.value.errors.team},null,8,["message"])]),e("div",J,[a(x,{modelValue:l.value.receiver,"onUpdate:modelValue":s[3]||(s[3]=o=>l.value.receiver=o),label:"Receiver",selected:l.value.receiver,options:q.value},null,8,["modelValue","selected","options"]),a(u,{class:"mt-2",message:l.value.errors.receiver},null,8,["message"])])]),s[5]||(s[5]=e("hr",{class:"mt-2"},null,-1)),(f(!0),m(v,null,C(l.value.items,(o,c)=>(f(),m("div",{class:"",key:c},[e("div",K,[e("button",{class:"bg-yellow-500 text-white btn-sm",type:"button",onClick:d=>A(c)},[a(p(g),{icon:"fa-solid fa-minus-circle"})],8,W)]),e("div",X,[e("div",Y,[a(x,{modelValue:o.item_pid,"onUpdate:modelValue":d=>o.item_pid=d,label:"Items",selected:o.item_pid,options:V.value},null,8,["modelValue","onUpdate:modelValue","selected","options"]),a(u,{class:"mt-2",message:l.value.errors.team},null,8,["message"])]),e("div",ee,[a(_,{for:"quantity",value:"Quantity"}),a($,{id:"date",type:"number",step:"0.5",class:"mt-1 block w-full",modelValue:o.quantity,"onUpdate:modelValue":d=>o.quantity=d,placeholder:"Enter Quantity",required:""},null,8,["modelValue","onUpdate:modelValue"]),a(u,{class:"mt-2",message:l.value.errors.quantity},null,8,["message"])])])]))),128)),e("button",{class:"bg-blue-500 text-white btn-sm mt-1",type:"button",onClick:T},[a(p(g),{icon:"fa-solid fa-plus-circle"})])])]),_:1},8,["show"]),e("div",null,[e("button",{onClick:s[4]||(s[4]=o=>b.value=!0),class:"bg-optimal text-white p-1 mb-2 rounded"},"Add Item")]),e("div",te,[e("table",se,[e("thead",le,[e("tr",null,[s[6]||(s[6]=e("th",{width:"5%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"S/N",-1)),s[7]||(s[7]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Date",-1)),s[8]||(s[8]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Items",-1)),s[9]||(s[9]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Team",-1)),s[10]||(s[10]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Status",-1)),s[11]||(s[11]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Receiver",-1)),e("th",oe,[a(p(g),{icon:"fa-solid fa fa-cog"})])])]),e("tbody",null,[(f(!0),m(v,null,C(w.value,(o,c)=>{var d,I;return f(),m("tr",{class:"bg-white",key:c},[e("td",ae,i(c+1),1),e("td",de,i(o.date_requested),1),e("td",re,i(o.items_count),1),e("td",ne,i((d=o==null?void 0:o.team)==null?void 0:d.team),1),e("td",ie,i(o.request_status),1),e("td",ue,i((I=o==null?void 0:o.collector)==null?void 0:I.username),1),e("td",ce,[e("button",{class:"p-1 oy-1 text-sm rounded-md bg-yellow-500 text-white me-2 inline-block",onClick:be=>R(o)},"Edit",8,me)])])}),128))])])])]),_:1})],64))}};export{ke as default};
