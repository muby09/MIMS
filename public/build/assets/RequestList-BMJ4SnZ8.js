import{M as C,f as E}from"./MainLayout-DSJFYPCE.js";import{l as c,c as n,a as o,u as w,w as y,F as f,v as p,o as i,Z as R,b as e,r as k,I as S,t as d,n as F}from"./app-BrrR7Ozw.js";import{_ as L}from"./Modal-BsoZiXVd.js";import{b,_ as q,a as V}from"./TextInput-D-PxJzzM.js";import{_ as N}from"./BaseSelect-ClYQ34LG.js";import"./NavLink-D2RRvuaw.js";import"./ApplicationLogo-CHeMhNff.js";const B={action:"",class:"px-4 py-2"},D={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},Q={class:"flex flex-col"},A={class:"flex flex-col"},z={class:"flex flex-col"},T={class:"overflow-auto rounded-lg shadow mt-3"},Z={class:"w-full"},j={class:"bg-gray-50 border-b-2 border-gray-200"},G={width:"10%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},H={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},J={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},K={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},O={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},P={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},W={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},X={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered flex"},Y=["disabled","onClick"],ie={__name:"RequestList",setup(ee){const{transformValidationErrors:I}=E(),m=c(!1),_=()=>{m.value=!1},a=c({date:"",receiver:"",note:"",team:"",items:[{item_pid:"",quantity:""}],errors:{}});function M(){a.errors={},p.dispatch("postMethod",{url:"/approve-request",param:a.value}).then(t=>{(t==null?void 0:t.status)==422?a.value.errors=I(t.data):(t==null?void 0:t.status)==201&&(_(),g())}).catch(t=>{console.log(t)})}const U=t=>{a.value={date:t.date,receiver:t.receiver,team:t.team_pid,items:t.items,note:t.note,pid:t.pid,errors:{}},m.value=!0},x=c({});function g(t="load-request-list"){p.dispatch("getMethod",{url:t}).then(s=>{(s==null?void 0:s.status)==200&&(x.value=s.data)}).catch(s=>{console.log(s)})}g();const v=c({});function $(){p.dispatch("loadDropdown","item-quantity").then(({data:t})=>{v.value=t}).catch(t=>{console.log(t)})}return $(),(t,s)=>(i(),n(f,null,[o(w(R),{title:"Item Request List"}),o(C,null,{default:y(()=>[o(L,{show:m.value,onClose:_,title:"Request Item",onSubmit:M},{default:y(()=>[e("form",B,[s[0]||(s[0]=e("hr",{class:"mt-2"},null,-1)),(i(!0),n(f,null,k(a.value.items,(l,u)=>(i(),n("div",{class:"",key:u},[e("div",D,[e("div",Q,[o(N,{modelValue:l.item_pid,"onUpdate:modelValue":r=>l.item_pid=r,label:"Items",selected:l.item_pid,options:v.value},null,8,["modelValue","onUpdate:modelValue","selected","options"]),o(b,{class:"mt-2",message:a.value.errors.team},null,8,["message"])]),e("div",A,[o(q,{for:"quantity",value:"Quantity"}),o(V,{id:"date",type:"number",step:"0.5",class:"mt-1 block w-full",modelValue:l.quantity,"onUpdate:modelValue":r=>l.quantity=r,placeholder:"Enter Quantity",required:""},null,8,["modelValue","onUpdate:modelValue"]),o(b,{class:"mt-2",message:a.value.errors.quantity},null,8,["message"])]),e("div",z,[o(q,{for:"quantity",value:"Supply"}),o(V,{id:"date",type:"number",step:"0.5",class:"mt-1 block w-full",modelValue:l.quantity_supplied,"onUpdate:modelValue":r=>l.quantity_supplied=r,value:l.quantity,placeholder:"Enter Quantity",required:""},null,8,["modelValue","onUpdate:modelValue","value"]),o(b,{class:"mt-2",message:a.value.errors.quantity},null,8,["message"])])])]))),128))])]),_:1},8,["show"]),s[7]||(s[7]=e("div",null,null,-1)),e("div",T,[e("table",Z,[e("thead",j,[e("tr",null,[s[1]||(s[1]=e("th",{width:"5%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"S/N",-1)),s[2]||(s[2]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Date",-1)),s[3]||(s[3]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Items",-1)),s[4]||(s[4]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Team",-1)),s[5]||(s[5]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Status",-1)),s[6]||(s[6]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Receiver",-1)),e("th",G,[o(w(S),{icon:"fa-solid fa fa-cog"})])])]),e("tbody",null,[(i(!0),n(f,null,k(x.value,(l,u)=>{var r,h;return i(),n("tr",{class:"bg-white",key:u},[e("td",H,d(u+1),1),e("td",J,d(l.date_requested),1),e("td",K,d(l.items_count),1),e("td",O,d((r=l==null?void 0:l.team)==null?void 0:r.team),1),e("td",P,d(l.request_status),1),e("td",W,d((h=l==null?void 0:l.collector)==null?void 0:h.username),1),e("td",X,[e("button",{disabled:l.status,class:F([l.status&&"bg-gray-400","p-1 oy-1 text-sm bg-optimal rounded-md text-white me-2 inline-block"]),onClick:te=>U(l)},"Approve",10,Y)])])}),128))])])])]),_:1})],64))}};export{ie as default};
