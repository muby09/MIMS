import{m as n,c,a,u as b,w as U,F as v,y as d,o as f,Z as j,b as e,j as A,E as L,r as C,K as g,t as i}from"./app-CBJk9Lri.js";import{M as Q,f as K}from"./MainLayout-CBb8klju.js";import{_ as O}from"./Modal-CQDEl0PO.js";import{_,b as u,a as $}from"./TextInput-C5keBiF2.js";import{_ as x}from"./Select-BGtdqlRl.js";import"./NavLink-Dp-CSmQq.js";import"./ApplicationLogo-D_P0f3Os.js";const P={action:"",class:"px-4 py-2"},Z={class:"grid grid-cols-1 md:grid-cols-3 gap-2"},z={class:"flex flex-col"},G={class:"flex flex-col"},H={class:"flex flex-col"},J={class:"flex justify-end mt-1"},W=["onClick"],X={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Y={class:"flex flex-col"},ee={class:"flex flex-col"},te={class:"overflow-auto rounded-lg shadow"},se={class:"w-full"},le={class:"bg-gray-50 border-b-2 border-gray-200"},oe={width:"10%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ae={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},re={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ne={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},de={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ie={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ue={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},me={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ce=["onClick"],ye={__name:"Request",setup(fe){const{transformValidationErrors:D}=K(),p=n(!1),h=()=>{M(),p.value=!1},o=n({date:"",receiver:"",note:"",team:"",items:[{item_pid:"",quantity:""}],errors:{}});function E(){o.errors={},d.dispatch("postMethod",{url:"/request-item",param:o.value}).then(t=>{(t==null?void 0:t.status)==422?o.value.errors=D(t.data):(t==null?void 0:t.status)==201&&(h(),y())}).catch(t=>{console.log(t)})}const M=()=>{o.value={state:"",region:"",errors:{}}},N=t=>{o.value={date:t.date,receiver:t.receiver,team:t.team_pid,items:t.items,note:t.note,pid:t.pid,errors:{}},p.value=!0},w=n({});function y(t="load-request"){d.dispatch("getMethod",{url:t}).then(s=>{(s==null?void 0:s.status)==200&&(w.value=s.data)}).catch(s=>{console.log(s)})}y();const k=n({});function R(){d.dispatch("loadDropdown","teams/").then(({data:t})=>{k.value=t}).catch(t=>{console.log(t)})}R();const q=n({});function S(){d.dispatch("loadDropdown","users/").then(({data:t})=>{q.value=t}).catch(t=>{console.log(t)})}S();const V=n({});function T(){d.dispatch("loadDropdown","item-quantity").then(({data:t})=>{V.value=t}).catch(t=>{console.log(t)})}T();const F=()=>{o.value.items.push({item_pid:"",quantity:""})},B=t=>{if(o.value.items.length===1){d.commit("notify",{message:"One Item is required to proceed",type:"warning"});return}o.value.items.splice(t,1)};return(t,s)=>(f(),c(v,null,[a(b(j),{title:"Item Request"}),a(Q,null,{default:U(()=>[a(O,{show:p.value,onClose:h,title:"Request Item",onSubmit:E},{default:U(()=>[e("form",P,[e("div",null,[a(_,{for:"email",value:"Request Note"}),A(e("textarea",{"onUpdate:modelValue":s[0]||(s[0]=l=>o.value.note=l),placeholder:"Enter Note",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},null,512),[[L,o.value.note]]),a(u,{class:"mt-2",message:o.value.errors.note},null,8,["message"])]),e("div",Z,[e("div",z,[a(_,{for:"gsm",value:"Date"}),a($,{id:"date",type:"date",class:"mt-1 block w-full",modelValue:o.value.date,"onUpdate:modelValue":s[1]||(s[1]=l=>o.value.date=l),placeholder:"Phone Number",required:""},null,8,["modelValue"]),a(u,{class:"mt-2",message:o.value.errors.date},null,8,["message"])]),e("div",G,[a(x,{modelValue:o.value.team,"onUpdate:modelValue":s[2]||(s[2]=l=>o.value.team=l),label:"Team",placeholder:"Select Team",options:k.value},null,8,["modelValue","options"]),a(u,{class:"mt-2",message:o.value.errors.team},null,8,["message"])]),e("div",H,[a(x,{modelValue:o.value.receiver,"onUpdate:modelValue":s[3]||(s[3]=l=>o.value.receiver=l),label:"Team",placeholder:"Select Receiver",options:q.value},null,8,["modelValue","options"]),a(u,{class:"mt-2",message:o.value.errors.receiver},null,8,["message"])])]),s[5]||(s[5]=e("hr",{class:"mt-2"},null,-1)),(f(!0),c(v,null,C(o.value.items,(l,m)=>(f(),c("div",{class:"",key:m},[e("div",J,[e("button",{class:"bg-yellow-500 text-white btn-sm",type:"button",onClick:r=>B(m)},[a(b(g),{icon:"fa-solid fa-minus-circle"})],8,W)]),e("div",X,[e("div",Y,[a(x,{modelValue:l.item_pid,"onUpdate:modelValue":r=>l.item_pid=r,label:"Items",placeholder:"Select Item",options:V.value},null,8,["modelValue","onUpdate:modelValue","options"]),a(u,{class:"mt-2",message:o.value.errors.team},null,8,["message"])]),e("div",ee,[a(_,{for:"quantity",value:"Quantity"}),a($,{id:"date",type:"number",step:"0.5",class:"mt-1 block w-full",modelValue:l.quantity,"onUpdate:modelValue":r=>l.quantity=r,placeholder:"Enter Quantity",required:""},null,8,["modelValue","onUpdate:modelValue"]),a(u,{class:"mt-2",message:o.value.errors.quantity},null,8,["message"])])])]))),128)),e("button",{class:"bg-blue-500 text-white btn-sm mt-1",type:"button",onClick:F},[a(b(g),{icon:"fa-solid fa-plus-circle"})])])]),_:1},8,["show"]),e("div",null,[e("button",{onClick:s[4]||(s[4]=l=>p.value=!0),class:"bg-optimal text-white p-1 mb-2 rounded"},"Add Item")]),e("div",te,[e("table",se,[e("thead",le,[e("tr",null,[s[6]||(s[6]=e("th",{width:"5%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"S/N",-1)),s[7]||(s[7]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Date",-1)),s[8]||(s[8]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Items",-1)),s[9]||(s[9]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Team",-1)),s[10]||(s[10]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Status",-1)),s[11]||(s[11]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Receiver",-1)),e("th",oe,[a(b(g),{icon:"fa-solid fa fa-cog"})])])]),e("tbody",null,[(f(!0),c(v,null,C(w.value,(l,m)=>{var r,I;return f(),c("tr",{class:"bg-white",key:m},[e("td",ae,i(m+1),1),e("td",re,i(l.date_requested),1),e("td",ne,i(l.items_count),1),e("td",de,i((r=l==null?void 0:l.team)==null?void 0:r.team),1),e("td",ie,i(l.request_status),1),e("td",ue,i((I=l==null?void 0:l.collector)==null?void 0:I.username),1),e("td",me,[e("button",{class:"p-1 oy-1 text-sm bg-yellow-500 text-white me-2 inline-block",onClick:pe=>N(l)},"Edit",8,ce)])])}),128))])])])]),_:1})],64))}};export{ye as default};
