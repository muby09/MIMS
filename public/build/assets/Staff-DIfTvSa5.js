import{o as m,c as b,a,b as l,t as d,F as w,r as y,M as I,l as g,v as _,d as T,w as A,x as j,z as E,H as z,D as H}from"./app-BUbXf8zH.js";import{M as J,f as K}from"./MainLayout-DLqZQz8T.js";import{_ as n,a as i,b as r}from"./TextInput-yIcStZbp.js";import{_ as Q}from"./Modal-DQyIuiwa.js";import"./NavLink-BH76FFhP.js";import"./ApplicationLogo-CgfMIpVf.js";const W=["value"],X={value:"",disabled:""},Y=["value","selected"],V={__name:"BaseSelect",props:{label:{type:String,default:""},defaultValue:{type:String,default:"Select an Option",required:!1},selected:{type:[String,Number],default:""},options:{type:[Array,Object],required:!0},val:{type:String,default:"id"}},emits:["update:model-value"],setup(u,{emit:S}){return(f,k)=>(m(),b(w,null,[a(n,{for:u.label,value:u.label},null,8,["for","value"]),l("select",I({class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",value:u.selected},{...f.$attrs,onChange:c=>{f.$emit("update:modelValue",c.target.value)}}),[l("option",X,d(u.defaultValue),1),(m(!0),b(w,null,y(u.options,(c,s)=>(m(),b("option",{key:s,value:c.id,selected:c.id===u.selected},d(c.text),9,Y))),128))],16,W)],64))}},Z={class:"px-4 py-2"},ee={class:"px-4 py-2"},te={class:"grid grid-cols-3 gap-4 py-4 px-4 md:py-8 md:px-8 text-sm"},le={class:"flex flex-col"},se={class:"flex flex-col"},oe={class:"flex flex-col"},ae={class:"flex flex-col"},de={class:"flex flex-col"},re={class:"flex flex-col"},ne={class:"flex flex-col"},ie={class:"flex flex-col"},me={class:"flex flex-col"},ue={class:"flex flex-col"},fe=["value"],ce={class:"flex flex-col"},ge={class:"flex flex-col"},be={class:"flex flex-col gap-4 px-4 md:px-8 text-sm"},ve={class:"overflow-auto rounded-lg shadow"},pe={class:"w-full"},xe={class:"bg-gray-50 border-b-2 border-gray-200"},_e={width:"5%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},he={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},we={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ke={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},Ve={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ye={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},Se={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},Ue={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},Ne={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},$e={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},Ce={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},De={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},Me={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},qe=["onClick"],Pe={__name:"Staff",setup(u){const{transformValidationErrors:S}=K(),f=g(!1),k=()=>{f.value=!1,P()},c=[{id:"Female",text:"Female"},{id:"Male",text:"Male"}],s=g({firstname:"",lastname:"",othername:"",file:"",gender:"",religion:"",role:"",dob:"",gsm:"",username:"",state_of_origin:"",lga_of_origin:"",address:"",errors:{}});L();const U=g({});function L(){_.dispatch("loadDropdown","states").then(({data:o})=>{U.value=o}).catch(o=>{console.log(o)})}const N=g({});function $(o){_.dispatch("loadDropdown","state-lga/"+o).then(({data:e})=>{N.value=e}).catch(e=>{console.log(e)})}g({});const C=g({});function O(){_.dispatch("loadDropdown","roles/").then(({data:o})=>{C.value=o}).catch(o=>{console.log(o)})}O();function G(){s.value.errors={};let o={"Content-Type":"multipart/form-data"};_.dispatch("postMethod",{url:"/staff",param:s.value,headers:o}).then(e=>{(e==null?void 0:e.status)==422?s.value.errors=S(e.data):(e==null?void 0:e.status)==201&&(M(),k())}).catch(e=>{console.log(e)})}const P=()=>{s.value={firstname:"",lastname:"",othername:"",file:"",gender:"",religion:"",role:"",dob:"",state_of_origin:"",lga_of_origin:"",state_of_residence:"",lga_of_residence:"",address:"",errors:{}}},R=o=>{var e,h,t,v,p,x;$((e=o==null?void 0:o.origin)==null?void 0:e.id),s.value={firstname:o.firstname,lastname:o.lastname,othername:o.othername,username:o.username,file:"",gender:o.gender,dob:o.dob,gsm:o.gsm,role:(t=(h=o==null?void 0:o.user)==null?void 0:h.roles[0])==null?void 0:t.name,email:(v=o==null?void 0:o.user)==null?void 0:v.email,state_of_origin:(p=o==null?void 0:o.origin)==null?void 0:p.id,lga_of_origin:(x=o==null?void 0:o.lga)==null?void 0:x.id,address:o.address,errors:{}},f.value=!0},D=g({});function M(o="load-staff"){_.dispatch("getMethod",{url:o}).then(e=>{(e==null?void 0:e.status)==200&&(D.value=e.data)}).catch(e=>{console.log(e)})}return M(),(o,e)=>{const h=j("font-awesome-icon");return m(),T(J,null,{default:A(()=>[l("div",Z,[a(Q,{show:f.value,onClose:k,"max-width":"6xl",title:"Staff Bio Data",onSubmit:G},{default:A(()=>[l("div",ee,[l("form",null,[l("div",te,[l("div",le,[a(n,{for:"first_name",value:"First Name"}),a(i,{id:"first_name",type:"text",class:"mt-1 block w-full",modelValue:s.value.firstname,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.firstname=t),placeholder:"First Name",required:""},null,8,["modelValue"]),a(r,{class:"mt-2",message:s.value.errors.firstname},null,8,["message"])]),l("div",se,[a(n,{for:"last_name",value:"Last Name"}),a(i,{id:"last_name",type:"text",class:"mt-1 block w-full",modelValue:s.value.lastname,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.lastname=t),placeholder:"Last Name",required:""},null,8,["modelValue"]),a(r,{class:"mt-2",message:s.value.errors.lastname},null,8,["message"])]),l("div",oe,[a(n,{for:"nin",value:"Othername"}),a(i,{id:"nin",type:"text",class:"mt-1 block w-full",modelValue:s.value.othername,"onUpdate:modelValue":e[2]||(e[2]=t=>s.value.othername=t),placeholder:"othername",required:""},null,8,["modelValue"]),a(r,{class:"mt-2",message:s.value.errors.othername},null,8,["message"])]),l("div",ae,[a(n,{for:"email",value:"Email address"}),a(i,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:s.value.email,"onUpdate:modelValue":e[3]||(e[3]=t=>s.value.email=t),placeholder:"Email address",required:""},null,8,["modelValue"]),a(r,{class:"mt-2",message:s.value.errors.email},null,8,["message"])]),l("div",de,[a(n,{for:"email",value:"Username"}),a(i,{id:"username",type:"text",class:"mt-1 block w-full",modelValue:s.value.username,"onUpdate:modelValue":e[4]||(e[4]=t=>s.value.username=t),placeholder:"e.g aminu.kudan",required:""},null,8,["modelValue"]),a(r,{class:"mt-2",message:s.value.errors.username},null,8,["message"])]),l("div",re,[a(n,{for:"gsm",value:"Phone Number"}),a(i,{id:"gsm",type:"text",class:"mt-1 block w-full",modelValue:s.value.gsm,"onUpdate:modelValue":e[5]||(e[5]=t=>s.value.gsm=t),placeholder:"Phone Number",required:""},null,8,["modelValue"]),a(r,{class:"mt-2",message:s.value.errors.gsm},null,8,["message"])]),l("div",ne,[a(V,{label:"Select Gender",modelValue:s.value.gender,"onUpdate:modelValue":e[6]||(e[6]=t=>s.value.gender=t),selected:s.value.gender,options:c},null,8,["modelValue","selected"]),a(r,{class:"mt-2",message:s.value.errors.gender},null,8,["message"])]),l("div",ie,[a(n,{for:"dob",value:"Date of Birth"}),a(i,{id:"dob",type:"date",class:"mt-1 block w-full",modelValue:s.value.dob,"onUpdate:modelValue":e[7]||(e[7]=t=>s.value.dob=t),placeholder:"Date of Birth",required:""},null,8,["modelValue"]),a(r,{class:"mt-2",message:s.value.errors.dob},null,8,["message"])]),l("div",me,[a(n,{for:"image",value:"Image"}),a(i,{id:"image",type:"file",class:"mt-1 block w-full",onInput:e[8]||(e[8]=t=>s.value.file=t.target.files[0]),placeholder:"Date of Birth",required:""}),a(r,{class:"mt-2",message:s.value.errors.file},null,8,["message"])]),l("div",ue,[a(n,{for:"dob",value:"State of Origin"}),E(l("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>s.value.state_of_origin=t),onChange:e[10]||(e[10]=t=>$(t.target.value)),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},[e[15]||(e[15]=l("option",{value:"",selected:""},"Choose State",-1)),(m(!0),b(w,null,y(U.value,t=>(m(),b("option",{key:t.id,value:t.id},d(t.text),9,fe))),128))],544),[[z,s.value.state_of_origin]]),a(r,{class:"mt-2",message:s.value.errors.state_of_origin},null,8,["message"])]),l("div",ce,[a(V,{label:"LGA of Origin",modelValue:s.value.lga_of_origin,"onUpdate:modelValue":e[11]||(e[11]=t=>s.value.lga_of_origin=t),selected:s.value.lga_of_origin,options:N.value},null,8,["modelValue","selected","options"]),a(r,{class:"mt-2",message:s.value.errors.lga_of_origin},null,8,["message"])]),l("div",ge,[a(V,{label:"Staff Role",modelValue:s.value.role,"onUpdate:modelValue":e[12]||(e[12]=t=>s.value.role=t),selected:s.value.role,options:C.value},null,8,["modelValue","selected","options"]),a(r,{class:"mt-2",message:s.value.errors.role},null,8,["message"])])]),l("div",be,[a(n,{for:"email",value:"Contact Address"}),E(l("textarea",{class:"staffForm-control border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":e[13]||(e[13]=t=>s.value.address=t),placeholder:"Address"},null,512),[[H,s.value.address]]),a(r,{class:"mt-2",message:s.value.errors.address},null,8,["message"])])])])]),_:1},8,["show"]),l("button",{onClick:e[14]||(e[14]=t=>f.value=!0),class:"bg-optimal text-white p-1 mb-2 rounded"},"Add Staff"),l("div",ve,[l("table",pe,[l("thead",xe,[l("tr",null,[e[16]||(e[16]=l("th",{width:"5%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"S/N",-1)),e[17]||(e[17]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Names ",-1)),e[18]||(e[18]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Email",-1)),e[19]||(e[19]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Username",-1)),e[20]||(e[20]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Role",-1)),e[21]||(e[21]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Phone Number",-1)),e[22]||(e[22]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Gender",-1)),e[23]||(e[23]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Date Of Birth",-1)),e[24]||(e[24]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"State ",-1)),e[25]||(e[25]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"LGA ",-1)),e[26]||(e[26]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Addrees ",-1)),l("th",_e,[a(h,{icon:"fa-solid fas fa-cog"})])])]),l("tbody",null,[(m(!0),b(w,null,y(D.value,(t,v)=>{var p,x,q,B,F;return m(),b("tr",{class:"bg-white",key:v},[l("td",he,d(v+1),1),l("td",we,d(t.lastname)+" "+d(t.firstname)+" "+d(t.othername),1),l("td",ke,d((p=t==null?void 0:t.user)==null?void 0:p.email),1),l("td",Ve,d(t.username),1),l("td",ye,d((q=(x=t==null?void 0:t.user)==null?void 0:x.roles[0])==null?void 0:q.name),1),l("td",Se,d(t.gsm),1),l("td",Ue,d(t.gender),1),l("td",Ne,d(t.date),1),l("td",$e,d((B=t.origin)==null?void 0:B.state),1),l("td",Ce,d((F=t.lga)==null?void 0:F.lga),1),l("td",De,d(t.address),1),l("td",Me,[l("button",{class:"bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-1 px-3 rounded text-sm",onClick:Be=>R(t)}," Edit ",8,qe)])])}),128))])])])])]),_:1})}}};export{Pe as default};
