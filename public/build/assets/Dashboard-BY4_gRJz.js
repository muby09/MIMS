import{M as F}from"./MainLayout-Dnz8xq8s.js";import{j as A,k as M,l as v,m as g,p as E,q as P,s as V,o as m,c as y,d as B,u as S,t as T,a as h,w as x,F as N,v as G,Z as I,b as d,e as O}from"./app-BeIHXs5z.js";import"./NavLink-BOBB4aM_.js";import"./Modal-DJ4_eovN.js";import"./TextInput-BxotePYa.js";import"./ApplicationLogo-DiO75rnE.js";const D="https://www.gstatic.com/charts/loader.js";let p=null;const w=new Map;function q(){return window.google!==void 0?Promise.resolve(window.google.charts):(p===null&&(p=new Promise(e=>{const t=document.querySelector('script[src="'.concat(D,'"]')),n=t||document.createElement("script");t||(n.src=D,n.type="text/javascript",document.head.append(n)),n.onload=()=>{window.google!==void 0&&e(window.google.charts)}})),p)}async function K(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"current",{packages:t=["corechart","controls"],language:n="en",mapsApiKey:a}=arguments.length>1?arguments[1]:void 0;const i=await q(),r="".concat(e,"_").concat(t.join("_"),"_").concat(n);if(w.has(r))return w.get(r);const l=new Promise(o=>{i.load(e,{packages:t,language:n,mapsApiKey:a}),i.setOnLoadCallback(()=>o(window.google))});return w.set(r,l),l}function R(e,t,n){return e!==null&&t instanceof e.visualization.DataTable||e!==null&&t instanceof e.visualization.DataView?t:e!==null&&Array.isArray(t)?e.visualization.arrayToDataTable(t,n):e!==null&&t!==null&&typeof t=="object"?new e.visualization.DataTable(t):null}function z(e,t,n,a,i,r){const l=(u,s,c)=>{if(c===void 0)throw new Error("please, provide chart type property");return new s.visualization[c](u)};if(e===null)throw new Error("please, provide charts lib property");if(n===null)throw new Error("please, provide chart element property");return t=(r||l)(n,e,a),U(e,t,i),t}function U(e,t,n){if(n!==null)for(const[a,i]of Object.entries(n))e!==null&&t!==null&&e.visualization.events.addListener(t,a,i)}function k(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,n;function a(){return t}return function(){for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];const u=this,s=function(){n=void 0,e.apply(u,l)};n!==void 0&&clearTimeout(n),n=setTimeout(s,a())}}let f=null;const _=M({name:"GChart",props:{type:{type:String,required:!0},data:{type:[Array,Object,null],default:()=>[]},isFirstRowLabels:{type:Boolean,default:!1},options:{type:Object,default:()=>({})},version:{type:String,default:"current"},settings:{type:Object,default:()=>({packages:["corechart","table"]})},events:{type:Object,default:null},createChart:{type:Function,default:void 0},resizeDebounce:{type:Number,default:200}},setup(e,t){let{emit:n}=t;const a=v(null),i=v(null);function r(){if(f===null||a.value===null)return;const l=R(f,e.data,e.isFirstRowLabels);if(l!==null){var o;(o=a.value)===null||o===void 0||o.draw(l,e.options)}}return g(()=>e.data,()=>r(),{deep:!0}),g(()=>e.options,()=>r(),{deep:!0}),g(()=>e.type,()=>{a.value=z(f,a.value,i.value,e.type,e.events,e.createChart),r()}),E(()=>{K(e.version,e.settings).then(l=>{l!==void 0&&(f=l,a.value=z(f,a.value,i.value,e.type,e.events,e.createChart),n("ready",a.value,l),r())}),e.resizeDebounce>0&&window.addEventListener("resize",k(r,e.resizeDebounce))}),P(()=>{a.value!==null&&typeof a.value.clearChart=="function"&&a.value.clearChart(),e.resizeDebounce>0&&window.removeEventListener("resize",k(r,e.resizeDebounce))}),()=>V("div",{ref:i},[])}}),j=A({});function $(){j.component("GChart",_)}const L={version:"1.1.0",install:$};let b=null;typeof window<"u"&&(b=window.Vue);b!=null&&j.use(L);const Y={key:1,class:"text-center p-4 mt-4"},Z={__name:"ChartComponent",props:{length:Number,chart:String,data:Array,options:Array},setup(e){return(t,n)=>{var a;return m(),y("div",null,[e.length>1?(m(),B(S(_),{key:0,type:e.chart,data:e.data,options:e.options},null,8,["type","data","options"])):(m(),y("span",Y,T((a=e.options)==null?void 0:a.title)+", No Data loaded",1))])}}},H={class:"py-1 z-2000"},J={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Q={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},oe={__name:"Dashboard",setup(e){const t=v({options:{title:"Meters",width:700,height:700},data:[]}),n=["","In store","Taken out for Installation","Installed","Faulty"],a=v(0),i=v({});function r(l="meter-summary"){G.dispatch("getMethod",{url:l}).then(o=>{(o==null?void 0:o.status)==200&&(i.value=o.data,t.value.data.push(["Status","total"]),i.value.forEach(u=>{a.value+=u.count,t.value.data.push([n[u==null?void 0:u.status],u.count])}),t.value.options.title="Meters, Total: "+a.value)}).catch(o=>{console.log(o)})}return r(),(l,o)=>(m(),y(N,null,[h(S(I),{title:"Dashboard"}),h(F,null,{header:x(()=>o[0]||(o[0]=[d("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Dashboard",-1)])),default:x(()=>{var u,s,c,C;return[d("div",H,[d("div",J,[d("div",Q,[o[1]||(o[1]=d("div",{class:"p-6 text-gray-900"},"You're logged in!",-1)),O(" "+T(i.value)+" ",1),h(Z,{length:(s=(u=t.value)==null?void 0:u.data)==null?void 0:s.length,chart:"PieChart",data:(c=t.value)==null?void 0:c.data,options:(C=t.value)==null?void 0:C.options},null,8,["length","data","options"])])])])]}),_:1})],64))}};export{oe as default};
