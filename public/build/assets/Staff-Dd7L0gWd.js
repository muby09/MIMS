import{l as m,v as c,d as R,w as M,x as I,o as b,b as l,a,z as B,G as T,c as v,r as F,F as q,A as z,t as d}from"./app-BWcQP7VV.js";import{M as j,f as H}from"./MainLayout-Bly49WJM.js";import{_ as n,a as i,b as r}from"./TextInput-BwgKbX4e.js";import{_}from"./BaseSelect-D3pfwwbo.js";import{_ as J}from"./Modal-D7pMsIs_.js";import"./NavLink-DIvRa9V7.js";import"./ApplicationLogo-CvViqzkG.js";const K={class:"px-4 py-2"},Q={class:"px-4 py-2"},W={class:"grid grid-cols-3 gap-4 py-4 px-4 md:py-8 md:px-8 text-sm"},X={class:"flex flex-col"},Y={class:"flex flex-col"},Z={class:"flex flex-col"},ee={class:"flex flex-col"},te={class:"flex flex-col"},le={class:"flex flex-col"},se={class:"flex flex-col"},oe={class:"flex flex-col"},ae={class:"flex flex-col"},de={class:"flex flex-col"},re=["value"],ne={class:"flex flex-col"},ie={class:"flex flex-col"},me={class:"flex flex-col gap-4 px-4 md:px-8 text-sm"},fe={class:"overflow-auto rounded-lg shadow"},ue={class:"w-full"},ge={class:"bg-gray-50 border-b-2 border-gray-200"},ce={width:"5%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},be={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},pe={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},xe={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ve={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},_e={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},he={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},we={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ke={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},Ve={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ye={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},Se={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},Ue={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},Ne=["onClick"],$e={__name:"Staff",setup(Ce){const{transformValidationErrors:A}=H(),p=m(!1),h=()=>{p.value=!1,O()},E=[{id:"Female",text:"Female"},{id:"Male",text:"Male"}],s=m({firstname:"",lastname:"",othername:"",file:"",gender:"",religion:"",role:"",dob:"",gsm:"",username:"",state_of_origin:"",lga_of_origin:"",address:"",errors:{}});L();const w=m({});function L(){c.dispatch("loadDropdown","states").then(({data:o})=>{w.value=o}).catch(o=>{console.log(o)})}const k=m({});function V(o){c.dispatch("loadDropdown","state-lga/"+o).then(({data:e})=>{k.value=e}).catch(e=>{console.log(e)})}m({});const y=m({});function $(){c.dispatch("loadDropdown","roles/").then(({data:o})=>{y.value=o}).catch(o=>{console.log(o)})}$();function G(){s.value.errors={};let o={"Content-Type":"multipart/form-data"};c.dispatch("postMethod",{url:"/staff",param:s.value,headers:o}).then(e=>{(e==null?void 0:e.status)==422?s.value.errors=A(e.data):(e==null?void 0:e.status)==201&&(U(),h())}).catch(e=>{console.log(e)})}const O=()=>{s.value={firstname:"",lastname:"",othername:"",file:"",gender:"",religion:"",role:"",dob:"",state_of_origin:"",lga_of_origin:"",state_of_residence:"",lga_of_residence:"",address:"",errors:{}}},P=o=>{var e,x,t,f,u,g;V((e=o==null?void 0:o.origin)==null?void 0:e.id),s.value={firstname:o.firstname,lastname:o.lastname,othername:o.othername,username:o.username,file:"",gender:o.gender,dob:o.dob,gsm:o.gsm,role:(t=(x=o==null?void 0:o.user)==null?void 0:x.roles[0])==null?void 0:t.name,email:(f=o==null?void 0:o.user)==null?void 0:f.email,state_of_origin:(u=o==null?void 0:o.origin)==null?void 0:u.id,lga_of_origin:(g=o==null?void 0:o.lga)==null?void 0:g.id,address:o.address,errors:{}},p.value=!0},S=m({});function U(o="load-staff"){c.dispatch("getMethod",{url:o}).then(e=>{(e==null?void 0:e.status)==200&&(S.value=e.data)}).catch(e=>{console.log(e)})}return U(),(o,e)=>{const x=I("font-awesome-icon");return b(),R(j,null,{default:M(()=>[l("div",K,[a(J,{show:p.value,onClose:h,"max-width":"6xl",title:"Staff Bio Data",onSubmit:G},{default:M(()=>[l("div",Q,[l("form",null,[l("div",W,[l("div",X,[a(n,{for:"first_name",value:"First Name"}),a(i,{id:"first_name",type:"text",class:"mt-1 block w-full",modelValue:s.value.firstname,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.firstname=t),placeholder:"First Name",required:""},null,8,["modelValue"]),a(r,{class:"mt-2",message:s.value.errors.firstname},null,8,["message"])]),l("div",Y,[a(n,{for:"last_name",value:"Last Name"}),a(i,{id:"last_name",type:"text",class:"mt-1 block w-full",modelValue:s.value.lastname,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.lastname=t),placeholder:"Last Name",required:""},null,8,["modelValue"]),a(r,{class:"mt-2",message:s.value.errors.lastname},null,8,["message"])]),l("div",Z,[a(n,{for:"nin",value:"Othername"}),a(i,{id:"nin",type:"text",class:"mt-1 block w-full",modelValue:s.value.othername,"onUpdate:modelValue":e[2]||(e[2]=t=>s.value.othername=t),placeholder:"othername",required:""},null,8,["modelValue"]),a(r,{class:"mt-2",message:s.value.errors.othername},null,8,["message"])]),l("div",ee,[a(n,{for:"email",value:"Email address"}),a(i,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:s.value.email,"onUpdate:modelValue":e[3]||(e[3]=t=>s.value.email=t),placeholder:"Email address",required:""},null,8,["modelValue"]),a(r,{class:"mt-2",message:s.value.errors.email},null,8,["message"])]),l("div",te,[a(n,{for:"email",value:"Username"}),a(i,{id:"username",type:"text",class:"mt-1 block w-full",modelValue:s.value.username,"onUpdate:modelValue":e[4]||(e[4]=t=>s.value.username=t),placeholder:"e.g aminu.kudan",required:""},null,8,["modelValue"]),a(r,{class:"mt-2",message:s.value.errors.username},null,8,["message"])]),l("div",le,[a(n,{for:"gsm",value:"Phone Number"}),a(i,{id:"gsm",type:"text",class:"mt-1 block w-full",modelValue:s.value.gsm,"onUpdate:modelValue":e[5]||(e[5]=t=>s.value.gsm=t),placeholder:"Phone Number",required:""},null,8,["modelValue"]),a(r,{class:"mt-2",message:s.value.errors.gsm},null,8,["message"])]),l("div",se,[a(_,{label:"Select Gender",modelValue:s.value.gender,"onUpdate:modelValue":e[6]||(e[6]=t=>s.value.gender=t),selected:s.value.gender,options:E},null,8,["modelValue","selected"]),a(r,{class:"mt-2",message:s.value.errors.gender},null,8,["message"])]),l("div",oe,[a(n,{for:"dob",value:"Date of Birth"}),a(i,{id:"dob",type:"date",class:"mt-1 block w-full",modelValue:s.value.dob,"onUpdate:modelValue":e[7]||(e[7]=t=>s.value.dob=t),placeholder:"Date of Birth",required:""},null,8,["modelValue"]),a(r,{class:"mt-2",message:s.value.errors.dob},null,8,["message"])]),l("div",ae,[a(n,{for:"image",value:"Image"}),a(i,{id:"image",type:"file",class:"mt-1 block w-full",onInput:e[8]||(e[8]=t=>s.value.file=t.target.files[0]),placeholder:"Date of Birth",required:""}),a(r,{class:"mt-2",message:s.value.errors.file},null,8,["message"])]),l("div",de,[a(n,{for:"dob",value:"State of Origin"}),B(l("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>s.value.state_of_origin=t),onChange:e[10]||(e[10]=t=>V(t.target.value)),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},[e[15]||(e[15]=l("option",{value:"",selected:""},"Choose State",-1)),(b(!0),v(q,null,F(w.value,t=>(b(),v("option",{key:t.id,value:t.id},d(t.text),9,re))),128))],544),[[T,s.value.state_of_origin]]),a(r,{class:"mt-2",message:s.value.errors.state_of_origin},null,8,["message"])]),l("div",ne,[a(_,{label:"LGA of Origin",modelValue:s.value.lga_of_origin,"onUpdate:modelValue":e[11]||(e[11]=t=>s.value.lga_of_origin=t),selected:s.value.lga_of_origin,options:k.value},null,8,["modelValue","selected","options"]),a(r,{class:"mt-2",message:s.value.errors.lga_of_origin},null,8,["message"])]),l("div",ie,[a(_,{label:"Staff Role",modelValue:s.value.role,"onUpdate:modelValue":e[12]||(e[12]=t=>s.value.role=t),selected:s.value.role,options:y.value},null,8,["modelValue","selected","options"]),a(r,{class:"mt-2",message:s.value.errors.role},null,8,["message"])])]),l("div",me,[a(n,{for:"email",value:"Contact Address"}),B(l("textarea",{class:"staffForm-control border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":e[13]||(e[13]=t=>s.value.address=t),placeholder:"Address"},null,512),[[z,s.value.address]]),a(r,{class:"mt-2",message:s.value.errors.address},null,8,["message"])])])])]),_:1},8,["show"]),l("button",{onClick:e[14]||(e[14]=t=>p.value=!0),class:"bg-optimal text-white p-1 mb-2 rounded"},"Add Staff"),l("div",fe,[l("table",ue,[l("thead",ge,[l("tr",null,[e[16]||(e[16]=l("th",{width:"5%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"S/N",-1)),e[17]||(e[17]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Names ",-1)),e[18]||(e[18]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Email",-1)),e[19]||(e[19]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Username",-1)),e[20]||(e[20]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Role",-1)),e[21]||(e[21]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Phone Number",-1)),e[22]||(e[22]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Gender",-1)),e[23]||(e[23]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Date Of Birth",-1)),e[24]||(e[24]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"State ",-1)),e[25]||(e[25]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"LGA ",-1)),e[26]||(e[26]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Addrees ",-1)),l("th",ce,[a(x,{icon:"fa-solid fas fa-cog"})])])]),l("tbody",null,[(b(!0),v(q,null,F(S.value,(t,f)=>{var u,g,N,C,D;return b(),v("tr",{class:"bg-white",key:f},[l("td",be,d(f+1),1),l("td",pe,d(t.lastname)+" "+d(t.firstname)+" "+d(t.othername),1),l("td",xe,d((u=t==null?void 0:t.user)==null?void 0:u.email),1),l("td",ve,d(t.username),1),l("td",_e,d((N=(g=t==null?void 0:t.user)==null?void 0:g.roles[0])==null?void 0:N.name),1),l("td",he,d(t.gsm),1),l("td",we,d(t.gender),1),l("td",ke,d(t.date),1),l("td",Ve,d((C=t.origin)==null?void 0:C.state),1),l("td",ye,d((D=t.lga)==null?void 0:D.lga),1),l("td",Se,d(t.address),1),l("td",Ue,[l("button",{class:"bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-1 px-3 rounded text-sm",onClick:De=>P(t)}," Edit ",8,Ne)])])}),128))])])])])]),_:1})}}};export{$e as default};
