import{o as d,c as m,a as o,b as e,t as v,F as w,r as V,u as L,_ as z,h as O,l as x,n as P,y as R,g as T,v as k,d as M,w as I,x as W,z as G,A as H}from"./app-CW3dysIp.js";import{P as J}from"./PaginationLinks-5g7nPsmJ.js";import{M as K,f as X}from"./MainLayout-Cmmk1awv.js";import{d as Y}from"./index-B3NUbJ1b.js";import{_ as U}from"./Modal-Bt06__4A.js";import{_,a as q,b as h}from"./TextInput-vrEPnpDg.js";import"./NavLink-CClDQF10.js";import"./ApplicationLogo-BHMTuYLo.js";const Z=["name","id"],ee={value:"",selected:""},te=["value","v-if"],le={__name:"Select",props:{label:String,placeholder:String,options:Object,error:String,modelvalue:String,val:{type:String,default:"id"}},emits:["update:model-value"],setup(n,{emit:p}){let g=p;return(r,c)=>(d(),m(w,null,[o(_,{for:n.label,value:n.label},null,8,["for","value"]),e("select",{name:n.label,id:n.label,onChange:c[0]||(c[0]=a=>{L(g)("update:model-value",a.target.value)}),class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},[e("option",ee,v(n.placeholder),1),(d(!0),m(w,null,V(n.options,(a,b)=>(d(),m("option",{key:b,value:n.val=="id"?a.id:a.text,"v-if":a.id==n.modelvalue&&n.val=="id"||a.text==n.modelvalue?"selected":""},v(a.text),9,te))),128))],40,Z)],64))}},se={class:"dropDownMenuWrapper"},oe={__name:"DropMenu",props:{title:{type:String,default:"Action"},align:{type:String,default:"right"}},setup(n){const p=n,g=O(()=>p.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":p.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),r=x(!1);return(c,a)=>(d(),m("section",se,[e("button",{class:"dropDownMenuButton",ref:"menu",onClick:a[0]||(a[0]=b=>r.value=!r.value)},v(n.title),513),r.value?(d(),m("section",{key:0,class:P(["dropdownMenu z-50",[g.value]]),onClick:a[2]||(a[2]=b=>r.value=!r.value)},[a[3]||(a[3]=e("div",{class:"menuArrow"},null,-1)),R(c.$slots,"default",{onClick:a[1]||(a[1]=b=>r.value=!r.value)},void 0,!0)],2)):T("",!0)]))}},ae=z(oe,[["__scopeId","data-v-345acfc6"]]),ne={class:"p-3"},ie={action:"",class:"px-4 py-2"},re={class:"grid grid-cols-2 gap-2"},de={class:"flex justify-between mt-1"},ue={class:"item-center place-items-center pt-3"},me=["onClick"],ce={action:"",class:"px-4 py-2"},fe={class:"flex justify-between mt-1"},ve={class:"flex justify-between mt-1"},pe={class:"flex justify-between mt-1"},ge={class:"overflow-auto rounded-lg shadow"},be={class:"w-full"},ye={class:"bg-gray-50 border-b-2 border-gray-200"},xe={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},he={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},_e={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},we={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ke={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},Ie={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},Ve={class:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"},Ce=["onClick"],qe={class:"mt-4"},$e={class:"flex space-x-1"},Ee={__name:"InventoryList",props:{lists:Array},setup(n){const{transformValidationErrors:p}=X(),g=x(!1),r=x(!1),c=()=>{Q(),g.value=!1,r.value=!1},a=t=>{i.value.item_pid=t.item_pid,i.value.qnt=t.quantity,r.value=!0},b=x({}),i=x({item_pid:"",cause:"",date:"",qnt:0,quantity:0,errors:[]});A();function A(){k.dispatch("loadDropdown","item-names").then(({data:t})=>{b.value=t}).catch(t=>{console.log(t)})}const N=t=>{Y.Inertia.get(t,{},{preserveState:!0,preserveScroll:!0})},u=x({items:[{item_pid:"",quantity:""}],errors:{}}),Q=()=>{u.value={items:[{item_pid:"",quantity:""}],errors:{}}},j=()=>{u.value.items.push({item_pid:"",quantity:""})},B=t=>{if(u.value.items.length===1){k.commit("notify",{message:"One Item is required to proceed",type:"warning"});return}u.value.items.splice(t,1)},E=()=>{u.errors={},k.dispatch("postMethod",{url:"/add-inventory-item",param:u.value}).then(t=>{(t==null?void 0:t.status)==422?u.value.errors=p(t.data):(t==null?void 0:t.status)==201&&c()}).catch(t=>{console.log(t)})},F=()=>{i.errors={},k.dispatch("postMethod",{url:"/remove-damage-item",param:i.value}).then(t=>{(t==null?void 0:t.status)==422?i.value.errors=p(t.data):(t==null?void 0:t.status)==201&&c()}).catch(t=>{console.log(t)})};return(t,l)=>{const C=W("font-awesome-icon");return d(),M(K,null,{default:I(()=>{var $;return[e("div",ne,[o(U,{show:g.value,onClose:c,title:"Add Item Quantity ",onSubmit:E},{default:I(()=>[e("form",ie,[(d(!0),m(w,null,V(u.value.items,(s,y)=>(d(),m("div",{class:"",key:y},[e("div",re,[e("div",null,[o(le,{modelValue:s.item_pid,"onUpdate:modelValue":f=>s.item_pid=f,label:"Item name",placeholder:"Select item",options:b.value},null,8,["modelValue","onUpdate:modelValue","options"]),o(h,{class:"mt-2",message:u.value.errors.feeder},null,8,["message"])]),e("div",null,[o(_,{for:"feeder",value:"Item Quantity"}),e("div",de,[o(q,{id:"feeder33",type:"text",class:"mt-1 block w-full",modelValue:s.quantity,"onUpdate:modelValue":f=>s.quantity=f,required:"",placeholder:"e.g 120"},null,8,["modelValue","onUpdate:modelValue"]),e("div",ue,[e("button",{class:"bg-yellow-500 text-white btn-sm",type:"button",onClick:f=>B(y)},[o(C,{icon:"fa-solid fa-minus-circle"})],8,me)])]),o(h,{class:"mt-2",message:u.value.errors.feeder},null,8,["message"])])])]))),128)),e("button",{class:"bg-blue-500 text-white btn-sm mt-1",type:"button",onClick:j},[o(C,{icon:"fa-solid fa-plus-circle"})])])]),_:1},8,["show"]),o(U,{show:r.value,onClose:c,"max-width":"sm",title:"Remove Damage Item ",onSubmit:F},{default:I(()=>[e("form",ce,[e("div",null,[o(_,{for:"feeder",value:"Item Quantity"}),e("div",fe,[o(q,{id:"feeder33",type:"text",class:"mt-1 block w-full",modelValue:i.value.quantity,"onUpdate:modelValue":l[0]||(l[0]=s=>i.value.quantity=s),required:"",placeholder:"e.g 120"},null,8,["modelValue"])]),o(h,{class:"mt-2",message:i.value.errors.quantity},null,8,["message"])]),e("div",null,[o(_,{for:"feeder",value:"Item Quantity"}),e("div",ve,[o(q,{id:"feeder33",type:"date",class:"mt-1 block w-full",modelValue:i.value.date,"onUpdate:modelValue":l[1]||(l[1]=s=>i.value.date=s)},null,8,["modelValue"])]),o(h,{class:"mt-2",message:i.value.errors.date},null,8,["message"])]),e("div",null,[o(_,{for:"feeder",value:"Cause of Damage"}),e("div",pe,[G(e("textarea",{id:"feeder33",type:"text",class:"mt-1 block w-full","onUpdate:modelValue":l[2]||(l[2]=s=>i.value.cause=s),required:"",placeholder:"e.g tamper"},null,512),[[H,i.value.cause]])]),o(h,{class:"mt-2",message:i.value.errors.feeder},null,8,["message"])])])]),_:1},8,["show"]),e("button",{onClick:l[3]||(l[3]=s=>g.value=!0),class:"bg-optimal text-white p-1 mb-2 rounded"},"Add Item")]),e("div",ge,[e("table",be,[e("thead",ye,[e("tr",null,[l[4]||(l[4]=e("th",{width:"5%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"S/N",-1)),l[5]||(l[5]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Item",-1)),l[6]||(l[6]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"description",-1)),l[7]||(l[7]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Quantity",-1)),e("th",xe,[o(C,{icon:"fa-solid fas fa-cog"})])])]),e("tbody",null,[(d(!0),m(w,null,V(($=n.lists)==null?void 0:$.data,(s,y)=>{var f,S,D;return d(),m("tr",{class:"bg-white",key:y},[e("td",he,v(y+1),1),e("td",_e,v((f=s.item)==null?void 0:f.name),1),e("td",we,v((S=s.item)==null?void 0:S.description),1),e("td",ke,v(s.quantity)+" "+v((D=s.item)==null?void 0:D.unit),1),e("td",Ie,[o(ae,null,{default:I(()=>[e("div",Ve,[e("a",{href:"#",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:Se=>a(s)},"Mark Damage",8,Ce),l[8]||(l[8]=e("a",{href:"#",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"},"Edit",-1)),l[9]||(l[9]=e("a",{href:"#",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"},"Deduction",-1))])]),_:2},1024)])])}),128))])]),e("div",null,[e("div",qe,[e("div",$e,[(d(!0),m(w,null,V(n.lists.links,(s,y)=>(d(),M(J,{link:s,key:y,onNext:f=>N(f,s)},null,8,["link","onNext"]))),128))])])])])]}),_:1})}}};export{Ee as default};
