import{_ as N,h as z,l as f,o as u,c as v,b as e,t as p,n as L,y as O,g as P,v as w,d as R,w as h,x as T,a as l,r as D,F as M,z as W,A as G}from"./app-n6E4I0fy.js";import{_ as H}from"./PaginationLink-nPXB2Aj4.js";import{M as J,f as K}from"./MainLayout-DphD4jOZ.js";import{d as X}from"./index-Cx3kgRcT.js";import{_ as S}from"./Modal-EI6dlTI4.js";import{_ as k,a as V,b as x}from"./TextInput-BnBd5iLC.js";import{_ as Y}from"./Select-xqsbDaTn.js";import"./NavLink-CP9jZ9M5.js";import"./ApplicationLogo-DX5rhbRb.js";const Z={class:"dropDownMenuWrapper"},ee={__name:"DropMenu",props:{title:{type:String,default:"Action"},align:{type:String,default:"right"}},setup(g){const b=g,_=z(()=>b.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":b.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),n=f(!1);return(c,r)=>(u(),v("section",Z,[e("button",{class:"dropDownMenuButton",ref:"menu",onClick:r[0]||(r[0]=y=>n.value=!n.value)},p(g.title),513),n.value?(u(),v("section",{key:0,class:L(["dropdownMenu z-50",[_.value]]),onClick:r[2]||(r[2]=y=>n.value=!n.value)},[r[3]||(r[3]=e("div",{class:"menuArrow"},null,-1)),O(c.$slots,"default",{onClick:r[1]||(r[1]=y=>n.value=!n.value)},void 0,!0)],2)):P("",!0)]))}},te=N(ee,[["__scopeId","data-v-1811f6b1"]]),se={class:"p-3"},le={action:"",class:"px-4 py-2"},oe={class:"grid grid-cols-2 gap-2"},ae={class:"flex justify-between mt-1"},ne={class:"item-center place-items-center pt-3"},re=["onClick"],ie={action:"",class:"px-4 py-2"},de={class:"flex justify-between mt-1"},me={class:"flex justify-between mt-1"},ue={class:"flex justify-between mt-1"},ce={class:"overflow-auto rounded-lg shadow"},fe={class:"w-full"},pe={class:"bg-gray-50 border-b-2 border-gray-200"},ve={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ge={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},be={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},_e={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ye={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},xe={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},we={class:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"},he=["onClick"],Ue={__name:"InventoryList",props:{lists:Array},setup(g){const{transformValidationErrors:b}=K(),_=f(!1),n=f(!1),c=()=>{Q(),_.value=!1,n.value=!1},r=t=>{i.value.item_pid=t.item_pid,i.value.qnt=t.quantity,n.value=!0},y=f({}),i=f({item_pid:"",cause:"",date:"",qnt:0,quantity:0});A();function A(){w.dispatch("loadDropdown","item-names").then(({data:t})=>{y.value=t}).catch(t=>{console.log(t)})}const U=t=>{X.Inertia.get(t,{},{preserveState:!0,preserveScroll:!0})},a=f({items:[{item_pid:"",quantity:""}],errors:{}}),Q=()=>{a.value={items:[{item_pid:"",quantity:""}],errors:{}}},B=()=>{a.value.items.push({item_pid:"",quantity:""})},j=t=>{if(a.value.items.length===1){w.commit("notify",{message:"One Item is required to proceed",type:"warning"});return}a.value.items.splice(t,1)},E=()=>{a.errors={},w.dispatch("postMethod",{url:"/add-inventory-item",param:a.value}).then(t=>{(t==null?void 0:t.status)==422?a.value.errors=b(t.data):(t==null?void 0:t.status)==201&&c()}).catch(t=>{console.log(t)})},F=()=>{a.errors={},w.dispatch("postMethod",{url:"/remove-damage-item",param:i.value}).then(t=>{(t==null?void 0:t.status)==422?a.value.errors=b(t.data):(t==null?void 0:t.status)==201&&c()}).catch(t=>{console.log(t)})};return(t,s)=>{const I=T("font-awesome-icon");return u(),R(J,null,{default:h(()=>{var q;return[e("div",se,[l(S,{show:_.value,onClose:c,title:"Add Item Quantity ",onSubmit:E},{default:h(()=>[e("form",le,[(u(!0),v(M,null,D(a.value.items,(o,d)=>(u(),v("div",{class:"",key:d},[e("div",oe,[e("div",null,[l(Y,{modelValue:o.item_pid,"onUpdate:modelValue":m=>o.item_pid=m,label:"Item name",placeholder:"Select item",options:y.value},null,8,["modelValue","onUpdate:modelValue","options"]),l(x,{class:"mt-2",message:a.value.errors.feeder},null,8,["message"])]),e("div",null,[l(k,{for:"feeder",value:"Item Quantity"}),e("div",ae,[l(V,{id:"feeder33",type:"text",class:"mt-1 block w-full",modelValue:o.quantity,"onUpdate:modelValue":m=>o.quantity=m,required:"",placeholder:"e.g 120"},null,8,["modelValue","onUpdate:modelValue"]),e("div",ne,[e("button",{class:"bg-yellow-500 text-white btn-sm",type:"button",onClick:m=>j(d)},[l(I,{icon:"fa-solid fa-minus-circle"})],8,re)])]),l(x,{class:"mt-2",message:a.value.errors.feeder},null,8,["message"])])])]))),128)),e("button",{class:"bg-blue-500 text-white btn-sm mt-1",type:"button",onClick:B},[l(I,{icon:"fa-solid fa-plus-circle"})])])]),_:1},8,["show"]),l(S,{show:n.value,onClose:c,"max-width":"sm",title:"Remove Damage Item ",onSubmit:F},{default:h(()=>[e("form",ie,[e("div",null,[l(k,{for:"feeder",value:"Item Quantity"}),e("div",de,[l(V,{id:"feeder33",type:"text",class:"mt-1 block w-full",modelValue:i.value.quantity,"onUpdate:modelValue":s[0]||(s[0]=o=>i.value.quantity=o),required:"",placeholder:"e.g 120"},null,8,["modelValue"])]),l(x,{class:"mt-2",message:a.value.errors.quantity},null,8,["message"])]),e("div",null,[l(k,{for:"feeder",value:"Item Quantity"}),e("div",me,[l(V,{id:"feeder33",type:"date",class:"mt-1 block w-full",modelValue:i.value.date,"onUpdate:modelValue":s[1]||(s[1]=o=>i.value.date=o)},null,8,["modelValue"])]),l(x,{class:"mt-2",message:a.value.errors.date},null,8,["message"])]),e("div",null,[l(k,{for:"feeder",value:"Cause of Damage"}),e("div",ue,[W(e("textarea",{id:"feeder33",type:"text",class:"mt-1 block w-full","onUpdate:modelValue":s[2]||(s[2]=o=>i.value.cause=o),required:"",placeholder:"e.g tamper"},null,512),[[G,i.value.cause]])]),l(x,{class:"mt-2",message:a.value.errors.feeder},null,8,["message"])])])]),_:1},8,["show"]),e("button",{onClick:s[3]||(s[3]=o=>_.value=!0),class:"bg-optimal text-white p-1 mb-2 rounded"},"Add Item")]),e("div",ce,[e("table",fe,[e("thead",pe,[e("tr",null,[s[5]||(s[5]=e("th",{width:"5%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"S/N",-1)),s[6]||(s[6]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Item",-1)),s[7]||(s[7]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"description",-1)),s[8]||(s[8]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Quantity",-1)),e("th",ve,[l(I,{icon:"fa-solid fas fa-cog"})])])]),e("tbody",null,[(u(!0),v(M,null,D((q=g.lists)==null?void 0:q.data,(o,d)=>{var m,C,$;return u(),v("tr",{class:"bg-white",key:d},[e("td",ge,p(d+1),1),e("td",be,p((m=o.item)==null?void 0:m.name),1),e("td",_e,p((C=o.item)==null?void 0:C.description),1),e("td",ye,p(o.quantity)+" "+p(($=o.item)==null?void 0:$.unit),1),e("td",xe,[l(te,null,{default:h(()=>[e("div",we,[e("a",{href:"#",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:ke=>r(o)},"Mark Damage",8,he),s[9]||(s[9]=e("a",{href:"#",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"},"Edit",-1)),s[10]||(s[10]=e("a",{href:"#",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"},"Deduction",-1))])]),_:2},1024)])])}),128))])]),e("div",null,[l(H,{onAction:s[4]||(s[4]=o=>{var d;return U((d=g.lists)==null?void 0:d.next_page_url)}),pages:t.links},null,8,["pages"])])])]}),_:1})}}};export{Ue as default};
