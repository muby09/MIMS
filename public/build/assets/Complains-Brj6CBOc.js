import{f as R,M as I}from"./MainLayout-DLqZQz8T.js";import{l as _,x as L,o as d,c as u,a as r,w as S,b as t,z as M,D as E,g as h,F as k,r as A,t as n,v as x,_ as K,u as O,Z as B,n as D}from"./app-BUbXf8zH.js";import{_ as T}from"./Modal-DQyIuiwa.js";import{_ as f,b,a as g}from"./TextInput-yIcStZbp.js";import{_ as F}from"./Select-CEZDa9d0.js";import"./NavLink-BH76FFhP.js";import"./ApplicationLogo-CgfMIpVf.js";const z={action:"",class:"px-4 py-2"},P={key:0},j={class:"overflow-auto rounded-lg shadow"},G={class:"min-w-full"},Z={class:"bg-gray-50 border-b-2 border-gray-200"},H={width:"3%",class:"text-sm font-semibold tracking-wide text-left table-bordered"},J={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},Q={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},W={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},X={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},Y={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},ee={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},te={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},le={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},se={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},oe={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},re={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},ne={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},ae={class:"p-1 text-sm font-semibold tracking-wide text-left table-bordered"},de=["onClick"],ue={__name:"ComplainTab",setup(U){const{transformValidationErrors:c}=R(),i=_(!1),p=()=>{i.value=!1},a=[{id:"pending",text:"pending"},{id:"resolved",text:"resolved"},{id:"unresolved",text:"unresolved"},{id:"replaced",text:"replaced"}],m=_({});function y(o="installed-list"){x.dispatch("getMethod",{url:o}).then(e=>{(e==null?void 0:e.status)==200&&(m.value=e.data)}).catch(e=>{console.log(e)})}y();const $=o=>{x.dispatch("getMethod",{url:"search-installed-list/"+o.target.value}).then(e=>{(e==null?void 0:e.status)==200&&(m.value=e.data)}).catch(e=>{console.log(e)})},s=_({meter_number:"",meter_pid:"",complain:"",status:"",resolution:"",new_meter_number:"",new_seal:"",errors:[]}),C=o=>{s.value.meter_number=o.meter_number,s.value.meter_pid=o.pid,i.value=!0},V=()=>{s.value.errors={},x.dispatch("postMethod",{url:"/add-customer-complain",param:s.value}).then(o=>{(o==null?void 0:o.status)==422?s.value.errors=c(o.data):(o==null?void 0:o.status)==201&&p()}).catch(o=>{console.log(o)})};return(o,e)=>{const N=L("font-awesome-icon");return d(),u(k,null,[r(T,{show:i.value,"max-width":"sm",onClose:p,title:"Add Complains ",onSubmit:V},{default:S(()=>[t("form",z,[t("div",null,[r(f,{for:"complain",value:"Customer Complain"}),M(t("textarea",{class:"w-full border-gray-300 focus:border-optimal focus:ring-optimal rounded-md shadow-sm","onUpdate:modelValue":e[0]||(e[0]=l=>s.value.complain=l),placeholder:"Enter Complain"},null,512),[[E,s.value.complain]]),r(b,{class:"mt-2",message:s.value.errors.complain},null,8,["message"])]),t("div",null,[r(f,{for:"complain",value:" Resolution"}),M(t("textarea",{class:"w-full border-gray-300 focus:border-optimal focus:ring-optimal rounded-md shadow-sm","onUpdate:modelValue":e[1]||(e[1]=l=>s.value.resolution=l),placeholder:"Enter resolution"},null,512),[[E,s.value.resolution]]),r(b,{class:"mt-2",message:s.value.errors.complain},null,8,["message"])]),t("div",null,[r(F,{modelValue:s.value.status,"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.status=l),label:"Status",placeholder:"Select Option",options:a},null,8,["modelValue"]),r(b,{class:"mt-2",message:s.value.errors.status},null,8,["message"])]),s.value.status=="replaced"?(d(),u("div",P,[t("div",null,[r(f,{for:"new_meter_number",value:"New Meter Number"}),r(g,{id:"new_meter_number",type:"number",class:"mt-1 block w-full",modelValue:s.value.new_meter_number,"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.new_meter_number=l),required:"",placeholder:"Enter new Meter Number"},null,8,["modelValue"]),r(b,{class:"mt-2",message:s.value.errors.new_meter_number},null,8,["message"])]),t("div",null,[r(f,{for:"new_seal",value:"New Seal"}),r(g,{id:"new_seal",type:"number",class:"mt-1 block w-full",modelValue:s.value.new_seal,"onUpdate:modelValue":e[4]||(e[4]=l=>s.value.new_seal=l),required:"",placeholder:"Enter New Seal"},null,8,["modelValue"]),r(b,{class:"mt-2",message:s.value.errors.new_seal},null,8,["message"])])])):h("",!0)])]),_:1},8,["show"]),t("div",j,[t("div",null,[r(g,{id:"longitude",type:"text",class:"mt-1 block w-full",onKeyup:$,placeholder:"enter account number or name"})]),t("table",G,[t("thead",Z,[t("tr",null,[e[5]||(e[5]=t("th",{width:"5%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"S/N",-1)),e[6]||(e[6]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Account Number",-1)),e[7]||(e[7]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Account Name",-1)),e[8]||(e[8]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Address",-1)),e[9]||(e[9]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"11kv Feeder",-1)),e[10]||(e[10]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"DT Name",-1)),e[11]||(e[11]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Meter Type",-1)),e[12]||(e[12]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Meter Number",-1)),e[13]||(e[13]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Meter Seal",-1)),e[14]||(e[14]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Latitude",-1)),e[15]||(e[15]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Longitude",-1)),e[16]||(e[16]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"}," Date ",-1)),t("th",H,[r(N,{icon:"fa-solid fas fa-cog"})])])]),t("tbody",null,[(d(!0),u(k,null,A(m.value,(l,w)=>{var v;return d(),u("tr",{class:"bg-white",key:w},[t("td",J,n(w+1),1),t("td",Q,n(l==null?void 0:l.account_no),1),t("td",W,n(l==null?void 0:l.fullname),1),t("td",X,n(l==null?void 0:l.address),1),t("td",Y,n((v=l==null?void 0:l.feeder11kv)==null?void 0:v.name),1),t("td",ee,n(l==null?void 0:l.dt_name),1),t("td",te,n(l==null?void 0:l.meter_type),1),t("td",le,n(l==null?void 0:l.meter_number),1),t("td",se,n(l==null?void 0:l.seal),1),t("td",oe,n(l==null?void 0:l.x_cordinate),1),t("td",re,n(l==null?void 0:l.y_cordinate),1),t("td",ne,n(l.date),1),t("td",ae,[t("button",{class:"bg-optimal text-white px-4 py-1 rounded mr-2",onClick:q=>C(l)},"Mark",8,de)])])}),128))])])])],64)}}},ie={class:"overflow-auto rounded-lg shadow"},me={class:"min-w-full"},ce={class:"bg-gray-50 border-b-2 border-gray-200"},be={width:"3%",class:"text-sm font-semibold tracking-wide text-left table-bordered"},pe={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},fe={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},_e={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},xe={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},ge={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},we={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},ve={class:"p-1 text-sm font-semibold tracking-wide text-left table-bordered"},he=["onClick"],ke={action:"",class:"px-4 py-2"},ye={key:0},$e={__name:"ReplacementTab",setup(U){const{transformValidationErrors:c}=R(),i=_(!1),p=()=>{i.value=!1},a=[{id:"PENDING",text:"pending"},{id:"RESOLVED",text:"resolved"},{id:"UNRESOLVED",text:"unresolved"},{id:"REPLACED",text:"replaced"}],m=_({});function y(o="complain-list"){x.dispatch("getMethod",{url:o}).then(e=>{(e==null?void 0:e.status)==200&&(m.value=e.data)}).catch(e=>{console.log(e)})}y();const $=o=>{o.target.value.trim()!=""&&x.dispatch("getMethod",{url:"search-complain-list/"+o.target.value}).then(e=>{(e==null?void 0:e.status)==200?m.value=e.data:m.value=[]}).catch(e=>{console.log(e)})},s=_({meter_number:"",meter_pid:"",complain:"",status:"",resolution:"",new_meter_number:"",new_seal:"",errors:[]}),C=o=>{s.value.meter_number=o.meter_number,s.value.meter_pid=o.pid,s.value.complain=o.complain,i.value=!0},V=()=>{s.value.errors={},x.dispatch("postMethod",{url:"/add-customer-complain",param:s.value}).then(o=>{(o==null?void 0:o.status)==422?s.value.errors=c(o.data):(o==null?void 0:o.status)==201&&p()}).catch(o=>{console.log(o)})};return(o,e)=>{const N=L("font-awesome-icon");return d(),u("div",null,[t("div",ie,[t("div",null,[r(g,{id:"longitude",type:"text",class:"mt-1 block w-full",onKeyup:$,placeholder:"enter account number or name"})]),t("table",me,[t("thead",ce,[t("tr",null,[e[4]||(e[4]=t("th",{width:"5%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"S/N",-1)),e[5]||(e[5]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Meter Number",-1)),e[6]||(e[6]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Complain ",-1)),e[7]||(e[7]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Resolution",-1)),e[8]||(e[8]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Status",-1)),e[9]||(e[9]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"New Meter Number",-1)),t("th",be,[r(N,{icon:"fa-solid fas fa-cog"})])])]),t("tbody",null,[(d(!0),u(k,null,A(m.value.data,(l,w)=>{var v;return d(),u("tr",{class:"bg-white",key:w},[t("td",pe,n(w+1),1),t("td",fe,n((v=l==null?void 0:l.meter)==null?void 0:v.meter_number),1),t("td",_e,n(l==null?void 0:l.complain),1),t("td",xe,n(l==null?void 0:l.resolution),1),t("td",ge,n(l==null?void 0:l.status),1),t("td",we,n(l==null?void 0:l.new_meter_number),1),t("td",ve,[t("button",{class:"bg-optimal text-white px-4 py-1 rounded mr-2",onClick:q=>C(l)},"Update",8,he)])])}),128))])])]),r(T,{show:i.value,"max-width":"sm",onClose:p,title:"Add Complains ",onSubmit:V},{default:S(()=>[t("form",ke,[t("div",null,[r(f,{for:"complain",value:" Resolution"}),M(t("textarea",{class:"w-full border-gray-300 focus:border-optimal focus:ring-optimal rounded-md shadow-sm","onUpdate:modelValue":e[0]||(e[0]=l=>s.value.resolution=l),placeholder:"Enter resolution"},null,512),[[E,s.value.resolution]]),r(b,{class:"mt-2",message:s.value.errors.complain},null,8,["message"])]),t("div",null,[r(F,{modelValue:s.value.status,"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.status=l),label:"Status",placeholder:"Select Option",options:a},null,8,["modelValue"]),r(b,{class:"mt-2",message:s.value.errors.status},null,8,["message"])]),s.value.status=="replaced"?(d(),u("div",ye,[t("div",null,[r(f,{for:"new_meter_number",value:"New Meter Number"}),r(g,{id:"new_meter_number",type:"number",class:"mt-1 block w-full",modelValue:s.value.new_meter_number,"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.new_meter_number=l),required:"",placeholder:"Enter new Meter Number"},null,8,["modelValue"]),r(b,{class:"mt-2",message:s.value.errors.new_meter_number},null,8,["message"])]),t("div",null,[r(f,{for:"new_seal",value:"New Seal"}),r(g,{id:"new_seal",type:"number",class:"mt-1 block w-full",modelValue:s.value.new_seal,"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.new_seal=l),required:"",placeholder:"Enter New Seal"},null,8,["modelValue"]),r(b,{class:"mt-2",message:s.value.errors.new_seal},null,8,["message"])])])):h("",!0)])]),_:1},8,["show"])])}}},Ce={class:"container mx-auto"},Ve={class:"m-4 pb-4 border bg-gray-100 rounded-lg"},Ne={class:"text-sm flex justify-center bg-gray-200"},Me={class:"p-3 bg-gra-200"},Ee={key:0},Se={class:"border border-gray-300 rounded-lg p-4"},Ue={key:1},De={class:"border border-gray-300 rounded-lg p-4"},Re={__name:"Complains",setup(U){const c=_(1),i=p=>c.value=p;return(p,a)=>(d(),u(k,null,[r(O(B),{title:"Customer's Complains"}),r(I,null,{default:S(()=>[t("div",Ce,[t("fieldset",Ve,[t("nav",Ne,[t("a",{onClick:a[0]||(a[0]=m=>i(1)),class:D(["inline-block px-4 py-2 cursor-pointer",c.value===1&&"active"])},"Complains",2),t("a",{onClick:a[1]||(a[1]=m=>i(2)),class:D(["inline-block px-4 py-2 cursor-pointer",c.value===2&&"active"])},"Replacement",2)]),t("div",Me,[c.value===1?(d(),u("div",Ee,[t("fieldset",Se,[a[2]||(a[2]=t("legend",{class:"text-lg font-medium text-left px-2"},"Complains",-1)),r(ue)])])):h("",!0),c.value===2?(d(),u("div",Ue,[t("fieldset",De,[a[3]||(a[3]=t("legend",{class:"text-lg font-medium text-left px-2"},"Replacement",-1)),r($e)])])):h("",!0)])])])]),_:1})],64))}},Oe=K(Re,[["__scopeId","data-v-597289f6"]]);export{Oe as default};
